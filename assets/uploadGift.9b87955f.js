import{g as B}from"./ak.db6abe61.js";import{r as N,a as R}from"./gift.8a654ecb.js";import{_ as T,y as z,r as m,z as F,k as M,u as P,b as d,o as p,c as v,e as l,w as a,h as q,s as j,g as c,i as _,j as f,E as O,p as D,q as H}from"./index.0cd409a9.js";import"./request.e927ab81.js";const J=r=>(D("data-v-18e1eb1c"),r=r(),H(),r),K={class:"root"},L=["src"],Q={key:1,class:"upload-wrap-box"},W=["src"],X=J(()=>q("div",{class:"upload-btn"},"\u4E0A\u4F20\u56FE\u7247",-1)),Y={__name:"uploadGift",setup(r){const t=z(),y=m(0),g=m(!0),h=m(!0),e=F({name:"",num:"",type:"",possible:""}),u=m("");M(()=>{t.query.id&&(e.name=t.query.name,e.num=t.query.num,e.type=t.query.type,e.possible=t.query.possible,y.value=t.query.id,u.value=t.query.img),t.query.add&&(t.query.giftType=="common"?h.value=!1:t.query.giftType=="other"&&(g.value=!1))});const w=(o,s)=>{u.value=o.data},k=async()=>{const o={name:e.name,img:u.value,head_img:u.value,type:e.type,num:e.num,possible:e.possible};e.type=="common"&&(o.num=9999,o.possible=100),await N(o)},x=async()=>{const o={id:y.value,name:e.name,img:u.value,head_img:u.value,type:e.type,num:e.num,possible:e.possible};e.type=="common"&&(o.num=9999,o.possible=100),await R(o)},G=o=>{},I=P(),U=async()=>{y.value?await x():await k(),O.success("\u4FDD\u5B58\u6210\u529F!"),I.go(-1)};return(o,s)=>{const b=d("el-input"),i=d("el-form-item"),A=d("el-upload"),V=d("el-radio"),C=d("el-radio-group"),E=d("el-button"),S=d("el-form");return p(),v("div",K,[l(S,{model:e,"label-width":"120px"},{default:a(()=>[l(i,{label:"\u793C\u52B5\u540D\u79F0\uFF1A"},{default:a(()=>[l(b,{clearable:"",class:"input-style",modelValue:e.name,"onUpdate:modelValue":s[0]||(s[0]=n=>e.name=n),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(i,{label:"\u793C\u52B5\u56FE\u7247\uFF1A",style:{margin:"40px 0"}},{default:a(()=>[l(A,{class:"avatar-uploader",action:"https://upload.tuuz.cc:444/v1/file/index/upfull?token=lc","show-file-list":!1,"on-success":w,"before-upload":G},{default:a(()=>[u.value?(p(),v("img",{key:0,src:u.value,class:"upload-img"},null,8,L)):(p(),v("div",Q,[q("img",{class:"upload-img-icon",src:j(B)("upload-image-icon.png"),alt:""},null,8,W),X]))]),_:1})]),_:1}),l(i,{label:"\u793C\u52B5\u7C7B\u578B\uFF1A"},{default:a(()=>[l(C,{modelValue:e.type,"onUpdate:modelValue":s[1]||(s[1]=n=>e.type=n)},{default:a(()=>[g.value?(p(),c(V,{key:0,label:"common"},{default:a(()=>[_("\u5E38\u89C4\u793C\u52B5")]),_:1})):f("",!0),h.value?(p(),c(V,{key:1,label:"other"},{default:a(()=>[_("\u7A00\u6709\u793C\u52B5")]),_:1})):f("",!0)]),_:1},8,["modelValue"])]),_:1}),e.type=="other"?(p(),c(i,{key:0,label:"\u793C\u52B5\u6570\u91CF\uFF1A"},{default:a(()=>[l(b,{clearable:"",class:"input-style",modelValue:e.num,"onUpdate:modelValue":s[2]||(s[2]=n=>e.num=n),placeholder:"\u8BF7\u8F93\u5165\u793C\u5238\u6570\u91CF"},null,8,["modelValue"])]),_:1})):f("",!0),e.type=="other"?(p(),c(i,{key:1,label:"\u6982\u7387\u8BBE\u7F6E\uFF1A"},{default:a(()=>[l(b,{clearable:"",class:"input-style",modelValue:e.possible,"onUpdate:modelValue":s[3]||(s[3]=n=>e.possible=n),placeholder:"\u8BF7\u8F93\u5165\u6982\u7387(0-100\u4E4B\u95F4)"},{append:a(()=>[_("%")]),_:1},8,["modelValue"])]),_:1})):f("",!0),l(i,null,{default:a(()=>[l(E,{class:"btn-save",type:"primary",onClick:U},{default:a(()=>[_("\u4FDD\u5B58\u793C\u52B5")]),_:1})]),_:1})]),_:1},8,["model"])])}}},oe=T(Y,[["__scopeId","data-v-18e1eb1c"]]);export{oe as default};
