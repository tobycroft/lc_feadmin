import{_ as b}from"./time-icon.39e37f07.js";import{_ as V,r as t,k as y,b as m,o as w,c as x,h as a,e as o,s as W,w as c,v as G,t as j,p as H,q as K}from"./index.6717ac94.js";import{r as f}from"./request.30f34286.js";import{h as I}from"./moment.9709ab41.js";const X="/images/certificate_border.png",Y=async _=>await f("https://api.lc.familyeducation.org.cn/v1/user/print/list",_),B=async _=>await f("https://api.lc.familyeducation.org.cn/v1/user/print/edit",_);const d=_=>(H("data-v-ab8a463b"),_=_(),K(),_),J={class:"root"},$={class:"flex search-wrap"},z={class:"time-wrap"},Z=d(()=>a("img",{class:"time-icon",src:b,alt:""},null,-1)),q=d(()=>a("span",{class:"time-char"},"\u7B5B\u9009\u65F6\u95F4",-1)),Q=d(()=>a("span",{style:{margin:"0 12px"}},"-",-1)),ee=d(()=>a("div",{style:{display:"flex","justify-content":"center","align-items":"center"}},[a("img",{class:"gift-img",src:X,alt:""})],-1)),ne={class:"btn-wrap"},ie=["onClick"],se=["onClick"],oe={class:"pagination-wrap"},ae={__name:"paperPrint",setup(_){const g=t(""),P=t(""),C=t(""),S=t(7),E=t(1),R=t(1),O=t([]),r=async()=>{const s={limit:S.value,page:E.value,start_date:g.value,end_date:P.value,phone:C.value},i=await Y(s);O.value=i.data,R.value=i.total};y(()=>{r()});const T=s=>I(s).format("YYYY/MM/DD HH:mm:ss"),F=s=>s+1,N={background:"#FAFAFA"},h=s=>{console.log(`${s} items per page`),r()},U=s=>{console.log(`current page: ${s}`),r()},M=(s,i="",l="",D="")=>{var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=async function(){var p=document.createElement("canvas");p.width=n.width,p.height=n.height;const u=I(D).format("YYYY\u5E74MM\u6708DD\u65E5");var e=p.getContext("2d");e.drawImage(n,0,0,n.width,n.height),e.font="120px STXingkai",e.textAlign="right",e.fillText(i,655,1050),e.textAlign="left",e.fillText(l,865,1050),await document.fonts.load(e.font),e.font="120px serif",e.fillText("&",735,1050),e.font="80px serif",e.fillText(u,515,1220);var v=p.toDataURL("image/png"),A=document.createElement("a"),k=new MouseEvent("click");A.download="\u8BC1\u4E66.png",A.href=v,A.dispatchEvent(k)},n.src=new URL("/images/certificate_border.png",self.location).href,L(s)},L=async s=>{await B({id:s,is_print:!0})};return(s,i)=>{const l=m("el-date-picker"),D=m("el-input"),n=m("el-table-column"),p=m("el-table"),u=m("el-pagination");return w(),x("div",J,[a("div",$,[a("div",z,[Z,q,o(l,{clearable:"",class:"time-input",modelValue:g.value,"onUpdate:modelValue":i[0]||(i[0]=e=>g.value=e),type:"datetime",placeholder:"\u8BF7\u9009\u62E9\u8D77\u59CB\u65F6\u95F4",onChange:r},null,8,["modelValue"]),Q,o(l,{class:"time-input",modelValue:P.value,"onUpdate:modelValue":i[1]||(i[1]=e=>P.value=e),type:"datetime",placeholder:"\u8BF7\u9009\u62E9\u7ED3\u675F\u65F6\u95F4",onChange:r},null,8,["modelValue"])]),o(D,{modelValue:C.value,"onUpdate:modelValue":i[2]||(i[2]=e=>C.value=e),class:"search-input",placeholder:"\u641C\u7D22\u624B\u673A\u53F7","suffix-icon":W(G),onChange:r},null,8,["modelValue","suffix-icon"])]),o(p,{"header-cell-style":N,data:O.value,style:{width:"100%"}},{default:c(()=>[o(n,{type:"index",label:"\u5E8F\u53F7",width:"80",index:F}),o(n,{prop:"wx_name",label:"\u7528\u6237\u540D",width:"150"}),o(n,{prop:"phone",width:"180",label:"\u624B\u673A\u53F7"}),o(n,{prop:"couple_name",label:"\u4F34\u4FA3\u540D\u79F0"}),o(n,{label:"\u8BC1\u4E66\u56FE\u7247",align:"center"},{default:c(()=>[ee]),_:1}),o(n,{label:"\u65F6\u95F4",width:"200",align:"center"},{default:c(({row:e})=>[a("div",null,j(T(e.receive_date)),1)]),_:1}),o(n,{label:"\u64CD\u4F5C",align:"center",width:"230"},{default:c(({row:e})=>[a("div",ne,[a("div",{class:"save-btn",onClick:v=>M(e.id,e.wx_name,e.couple_name,e.receive_date)},"\u4FDD\u5B58\u56FE\u7247",8,ie),a("div",{class:"btn-complete",onClick:v=>M(e.id,e.wx_name,e.couple_name,e.receive_date)},"\u6253\u5370\u8BC1\u4E66",8,se)])]),_:1})]),_:1},8,["data"]),a("div",oe,[o(u,{currentPage:E.value,"onUpdate:currentPage":i[3]||(i[3]=e=>E.value=e),"page-size":S.value,"onUpdate:pageSize":i[4]||(i[4]=e=>S.value=e),"page-sizes":[10,15,20],background:"",layout:"total, prev, pager, next, jumper",total:R.value,onSizeChange:h,onCurrentChange:U},null,8,["currentPage","page-size","total"])])])}}},me=V(ae,[["__scopeId","data-v-ab8a463b"]]);export{me as default};
