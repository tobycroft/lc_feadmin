import{_ as L}from"./time-icon.39e37f07.js";import{_ as T,r as m,k as b,b as _,o as y,c as N,h as i,e as a,s as x,w as C,v as V,t as W,p as k,q as j}from"./index.add95e2c.js";import{r as G}from"./request.99259bfe.js";import{h}from"./moment.9709ab41.js";const H="/images/print-paper.jpg",K=async l=>await G("https://api.lc.familyeducation.org.cn/v1/user/print/list",l);const P=l=>(k("data-v-a0030bc1"),l=l(),j(),l),B={class:"root"},X={class:"flex search-wrap"},Y={class:"time-wrap"},z=P(()=>i("img",{class:"time-icon",src:L,alt:""},null,-1)),Q=P(()=>i("span",{class:"time-char"},"\u7B5B\u9009\u65F6\u95F4",-1)),$=P(()=>i("span",{style:{margin:"0 12px"}},"-",-1)),J=P(()=>i("div",{style:{display:"flex","justify-content":"center","align-items":"center"}},[i("img",{class:"gift-img",src:H,alt:""})],-1)),q={class:"btn-wrap"},Z=["onClick"],ee=["onClick"],oe={class:"pagination-wrap"},ne={__name:"paperPrint",setup(l){const g=m(""),S=m(""),A=m(""),E=m(7),R=m(1),D=m(1),I=m([]),d=async()=>{const n={limit:E.value,page:R.value,start_date:g.value,end_date:S.value,phone:A.value},o=await K(n);o.data&&o.data.length&&(I.value=o.data),D.value=o.total};b(()=>{d()});const f=n=>h(n).utc().format("YYYY/MM/DD HH:mm:ss"),F=n=>n+1,U={background:"#FAFAFA"},M=n=>{console.log(`${n} items per page`),d()},w=n=>{console.log(`current page: ${n}`),d()},O=(n="",o="",c="")=>{var t=new Image;t.setAttribute("crossOrigin","anonymous"),t.onload=function(){var s=document.createElement("canvas");s.width=t.width,s.height=t.height;const u=h(c).format("YYYY\u5E74MM\u6708DD\u65E5");var r=s.getContext("2d");r.drawImage(t,0,0,t.width,t.height),r.font="120px serif",r.fillText(n,830,1800),r.fillText(o,1430,1800),r.font="80px serif",r.fillText(u,980,2020);var e=s.toDataURL("image/png"),p=document.createElement("a"),v=new MouseEvent("click");p.download="\u8BC1\u4E66.jpg",p.href=e,p.dispatchEvent(v)},t.src=new URL("/images/print-paper.jpg",self.location).href};return(n,o)=>{const c=_("el-date-picker"),t=_("el-input"),s=_("el-table-column"),u=_("el-table"),r=_("el-pagination");return y(),N("div",B,[i("div",X,[i("div",Y,[z,Q,a(c,{clearable:"",class:"time-input",modelValue:g.value,"onUpdate:modelValue":o[0]||(o[0]=e=>g.value=e),type:"datetime",placeholder:"\u8BF7\u9009\u62E9\u8D77\u59CB\u65F6\u95F4",onChange:d},null,8,["modelValue"]),$,a(c,{class:"time-input",modelValue:S.value,"onUpdate:modelValue":o[1]||(o[1]=e=>S.value=e),type:"datetime",placeholder:"\u8BF7\u9009\u62E9\u7ED3\u675F\u65F6\u95F4",onChange:d},null,8,["modelValue"])]),a(t,{modelValue:A.value,"onUpdate:modelValue":o[2]||(o[2]=e=>A.value=e),class:"search-input",placeholder:"\u641C\u7D22\u624B\u673A\u53F7","suffix-icon":x(V),onChange:d},null,8,["modelValue","suffix-icon"])]),a(u,{"header-cell-style":U,data:I.value,style:{width:"100%"}},{default:C(()=>[a(s,{type:"index",label:"\u5E8F\u53F7",width:"80",index:F}),a(s,{prop:"wx_name",label:"\u7528\u6237\u540D",width:"150"}),a(s,{prop:"phone",width:"180",label:"\u624B\u673A\u53F7"}),a(s,{prop:"couple_name",label:"\u4F34\u4FA3\u540D\u79F0"}),a(s,{label:"\u8BC1\u4E66\u56FE\u7247",align:"center"},{default:C(()=>[J]),_:1}),a(s,{label:"\u65F6\u95F4",width:"200",align:"center"},{default:C(({row:e})=>[i("div",null,W(f(e.date)),1)]),_:1}),a(s,{label:"\u64CD\u4F5C",align:"center",width:"230"},{default:C(({row:e})=>[i("div",q,[i("div",{class:"save-btn",onClick:p=>O(e.wx_name,e.couple_name,e.date)},"\u4FDD\u5B58\u56FE\u7247",8,Z),i("div",{class:"btn-complete",onClick:p=>O(e.wx_name,e.couple_name,e.date)},"\u6253\u5370\u8BC1\u4E66",8,ee)])]),_:1})]),_:1},8,["data"]),i("div",oe,[a(r,{currentPage:R.value,"onUpdate:currentPage":o[3]||(o[3]=e=>R.value=e),"page-size":E.value,"onUpdate:page-size":o[4]||(o[4]=e=>E.value=e),"page-sizes":[10,15,20],background:"",layout:"total, prev, pager, next, jumper",total:D.value,onSizeChange:M,onCurrentChange:w},null,8,["currentPage","page-size","total"])])])}}},re=T(ne,[["__scopeId","data-v-a0030bc1"]]);export{re as default};
