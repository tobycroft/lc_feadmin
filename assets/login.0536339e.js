import{g as u}from"./ak.db6abe61.js";import{u as D,m as R,E as p,_ as E,r as g,b as c,o as A,c as O,h as r,e as m,w as l,C as v,i as P,p as I,q as f}from"./index.46ff00ed.js";import{r as T}from"./request.ee69824f.js";const N=async s=>await T("https://api.lc.familyeducation.org.cn/v1/user/auth/login",s);function F(){const s=D(),o=async(n,i)=>await N({phone:n,password:i}),t=n=>{const i=/^[1][3-9][\d]{9}/;return n?i.test(n)||p.error("\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"):p.error("\u8BF7\u8F93\u5165\u624B\u673A\u53F7"),i.test(n)},e=n=>{if(!n)p.error("\u8BF7\u8F93\u5165\u5BC6\u7801");else return!0},d=R();return{onSubmit:async(n,i)=>{if(!t(n)||!e(i))return;const a=await o(n,i);a.token?(d.getLoginInfo(a.token,a.uid),s.push({path:"/studySearch"})):p.error("\u65E0\u767B\u5F55\u6743\u9650")}}}const M={setup(){const s=g(""),o=g(""),{onSubmit:t}=F();return{getImageUrl:u,phoneRef:s,passwordRef:o,onSubmit:t}}},S=s=>(I("data-v-22c609ec"),s=s(),f(),s),U={class:"main-wrap"},b=["src"],h={class:"login-wrap"},k=S(()=>r("h2",{class:"title"},"\u664B\u6C5F\u5E02\u65B0\u664B\u5BB6\u5EAD\u80FD\u529B\u4FC3\u8FDB\u5E73\u53F0",-1)),y={class:"login-box"},L=S(()=>r("h3",null,"\u767B\u5F55\u540E\u53F0\u7BA1\u7406",-1)),W=["src"],x=["src"];function V(s,o,t,e,d,C){const n=c("el-input"),i=c("el-button"),a=c("el-checkbox");return A(),O("div",{class:"root",style:v(`background-image: url(${e.getImageUrl("login-bg.png")})`)},[r("div",U,[r("img",{class:"people-img",src:e.getImageUrl("login-people.png"),alt:""},null,8,b),r("div",h,[k,r("div",y,[L,m(n,{maxlength:"11",modelValue:e.phoneRef,"onUpdate:modelValue":o[0]||(o[0]=_=>e.phoneRef=_),clearable:"",type:"text",class:"login-input",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},{prefix:l(()=>[r("img",{class:"icon",src:e.getImageUrl("login-phone.png"),alt:""},null,8,W)]),_:1},8,["modelValue"]),m(n,{maxlength:"11",modelValue:e.passwordRef,"onUpdate:modelValue":o[1]||(o[1]=_=>e.passwordRef=_),clearable:"",type:"text",class:"login-input",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},{prefix:l(()=>[r("img",{class:"icon",src:e.getImageUrl("login-password.png"),alt:""},null,8,x)]),_:1},8,["modelValue"]),m(i,{class:"login-btn",onClick:o[2]||(o[2]=_=>e.onSubmit(e.phoneRef,e.passwordRef))},{default:l(()=>[P("\u767B\u5F55")]),_:1}),m(a,null,{default:l(()=>[P("\u4E0B\u6B21\u81EA\u52A8\u767B\u5F55")]),_:1})])])])],4)}const j=E(M,[["render",V],["__scopeId","data-v-22c609ec"]]);export{j as default};
