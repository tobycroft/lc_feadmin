import{g as I}from"./ak.a0919d64.js";import{u,m as R,E as l,r as m,_ as O,b as d,o as v,c as F,h as a,e as p,A as P,B as C,t as W,w as S,C as f,i as A,p as U,q as k}from"./index.f0ffd9ca.js";import{r as D}from"./request.9ef88105.js";const y=async e=>await D("https://api.lc.familyeducation.org.cn/v1/user/auth/phone",e),N=async e=>await D("https://api.lc.familyeducation.org.cn/v1/user/auth/send",e);function T(){const e=u(),n=async(i,o)=>await y({phone:i,code:o}),r=i=>{const o=/^[1][3-9][\d]{9}/;return i?o.test(i)||l.error("\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"):l.error("\u8BF7\u8F93\u5165\u624B\u673A\u53F7"),o.test(i)},s=R();return{onSubmit:async(i,o)=>{if(!r(i))return;const t=await n(i,o);t.admin?(s.getLoginInfo(t.token,t.uid),e.push({path:"/studySearch"})):l.error("\u65E0\u767B\u5F55\u6743\u9650")}}}function M(e){const n=m(60),r=m(!1),s=async()=>{const i={phone:e.value};console.log(i),await N(i)};return{sendTime:n,isSend:r,handleSendCode:async()=>{await s(),r.value=!0;const i=setInterval(()=>{n.value--,n.value<=0&&(r.value=!1,n.value=0,clearTimeout(i))},1e3)}}}const L={setup(){const e=m(""),n=m(""),{onSubmit:r}=T();return{getImageUrl:I,phoneRef:e,codeRef:n,onSubmit:r,...M(e)}}},E=e=>(U("data-v-bcd321b9"),e=e(),k(),e),w={class:"main-wrap"},b=["src"],h={class:"login-wrap"},x=E(()=>a("h2",{class:"title"},"\u664B\u6C5F\u5E02\u65B0\u664B\u5BB6\u5EAD\u80FD\u529B\u4FC3\u8FDB\u5E73\u53F0",-1)),V={class:"login-box"},j=E(()=>a("h3",null,"\u767B\u5F55\u540E\u53F0\u7BA1\u7406",-1)),B={class:"code-wrap flex"};function G(e,n,r,s,g,i){const o=d("el-input"),t=d("el-button"),c=d("el-checkbox");return v(),F("div",{class:"root",style:f(`background-image: url(${s.getImageUrl("login-bg.png")})`)},[a("div",w,[a("img",{class:"people-img",src:s.getImageUrl("login-people.png"),alt:""},null,8,b),a("div",h,[x,a("div",V,[j,p(o,{maxlength:"11",modelValue:s.phoneRef,"onUpdate:modelValue":n[0]||(n[0]=_=>s.phoneRef=_),clearable:"",type:"text",class:"login-input",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"]),a("div",B,[p(o,{modelValue:s.codeRef,"onUpdate:modelValue":n[1]||(n[1]=_=>s.codeRef=_),type:"password","show-password":"",clearable:"",class:"login-input code",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),P(a("div",{class:"send-btn",onClick:n[2]||(n[2]=(..._)=>e.handleSendCode&&e.handleSendCode(..._))},"\u53D1\u9001\u9A8C\u8BC1\u7801",512),[[C,!e.isSend]]),P(a("div",{class:"send-btn grey"},"\u5DF2\u53D1\u9001("+W(e.sendTime)+"s)",513),[[C,e.isSend]])]),p(t,{class:"login-btn",onClick:n[3]||(n[3]=_=>s.onSubmit(s.phoneRef,s.codeRef))},{default:S(()=>[A("\u767B\u5F55")]),_:1}),p(c,null,{default:S(()=>[A("\u4E0B\u6B21\u81EA\u52A8\u767B\u5F55")]),_:1})])])])],4)}const Y=O(L,[["render",G],["__scopeId","data-v-bcd321b9"]]);export{Y as default};
